@{
    ViewData["Title"] = "Home - Upgraded to .NET 10";
}

<div class="container-fluid">
    <div class="text-center mb-5">
        <h1 class="display-3 fw-bold text-primary">üöÄ Modern App - .NET 10 Upgrade</h1>
        <p class="lead text-muted">Successfully migrated from .NET 7 to .NET 10 with latest libraries</p>
    </div>
    
    <div class="alert alert-success shadow-sm" role="alert">
        <h4 class="alert-heading"><i class="bi bi-check-circle-fill"></i> ‚úÖ Migration Complete!</h4>
        <hr>
        <div class="row">
            <div class="col-md-6">
                <h6 class="fw-bold">Backend Upgrades:</h6>
                <ul class="mb-0">
                    <li><strong>.NET Framework:</strong> 10.0 LTS</li>
                    <li><strong>Entity Framework Core:</strong> 10.0.0</li>
                    <li><strong>SignalR:</strong> Real-time communication enabled</li>
                    <li><strong>HealthChecks UI:</strong> 8.0.2</li>
                    <li><strong>NSwag (Swagger):</strong> 14.1.0</li>
                </ul>
            </div>
            <div class="col-md-6">
                <h6 class="fw-bold">Frontend Upgrades:</h6>
                <ul class="mb-0">
                    <li><strong>Bootstrap:</strong> 5.3.3 (Latest Stable)</li>
                    <li><strong>jQuery:</strong> 3.7.1 (Latest Stable)</li>
                    <li><strong>Razor Pages:</strong> .NET 10 Compatible</li>
                    <li><strong>React:</strong> 18.3.1</li>
                    <li><strong>Total Products:</strong> @ViewData["ProductCount"]</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="row g-4 mt-4">
        <div class="col-md-4">
            <div class="card h-100 shadow-sm hover-card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-file-earmark-code"></i> API Documentation</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Explore the REST API endpoints using NSwag Swagger UI with OpenAPI 3.0 specification</p>
                    <ul class="list-unstyled">
                        <li>‚úì Products CRUD API</li>
                        <li>‚úì SignalR Hubs</li>
                        <li>‚úì Auto-generated docs</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="/swagger" class="btn btn-primary w-100" target="_blank">Open Swagger UI</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card h-100 shadow-sm hover-card">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-heart-pulse"></i> Health Checks</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Monitor application health with AspNetCore.HealthChecks.UI</p>
                    <ul class="list-unstyled">
                        <li>‚úì SQL Server connectivity</li>
                        <li>‚úì GC Memory monitoring</li>
                        <li>‚úì Real-time dashboard</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="/health-json" class="btn btn-success w-100" target="_blank">View Health JSON</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card h-100 shadow-sm hover-card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-broadcast"></i> SignalR Hub</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Real-time notifications using SignalR</p>
                    <div id="signalr-status" class="alert alert-secondary">
                        <small>Status: <span id="connection-status">Disconnected</span></small>
                    </div>
                    <button id="connect-signalr" class="btn btn-sm btn-outline-info">Connect to Hub</button>
                </div>
                <div class="card-footer">
                    <small class="text-muted">Hub: /hubs/notifications</small>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row g-4 mt-4">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-warning">
                    <h5 class="mb-0"><i class="bi bi-react"></i> React Frontend</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Modern React 18 SPA with Bootstrap 5 UI</p>
                    <ul class="list-unstyled">
                        <li>‚úì Product Management CRUD</li>
                        <li>‚úì Real-time updates via SignalR</li>
                        <li>‚úì Responsive Bootstrap design</li>
                    </ul>
                    <button class="btn btn-warning w-100" onclick="openReact()">Launch React App</button>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0"><i class="bi bi-bootstrap"></i> Bootstrap & jQuery Demo</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Interactive demonstration of Bootstrap 5.3.3 and jQuery 3.7.1</p>
                    <button class="btn btn-dark w-100" id="demo-btn">Click for jQuery Animation</button>
                    <div id="demo-result" class="mt-3"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row mt-5">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">üìã Upgrade Summary</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>Component</th>
                                    <th>Before (.NET 7)</th>
                                    <th>After (.NET 10)</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>.NET SDK</td>
                                    <td>7.0</td>
                                    <td>10.0 LTS</td>
                                    <td><span class="badge bg-success">Upgraded</span></td>
                                </tr>
                                <tr>
                                    <td>Bootstrap</td>
                                    <td>4.x / 5.x</td>
                                    <td>5.3.3 (Latest)</td>
                                    <td><span class="badge bg-success">Upgraded</span></td>
                                </tr>
                                <tr>
                                    <td>jQuery</td>
                                    <td>3.6.x</td>
                                    <td>3.7.1 (Latest)</td>
                                    <td><span class="badge bg-success">Upgraded</span></td>
                                </tr>
                                <tr>
                                    <td>Razor Pages</td>
                                    <td>.NET 7</td>
                                    <td>.NET 10 with Runtime Compilation</td>
                                    <td><span class="badge bg-success">Upgraded</span></td>
                                </tr>
                                <tr>
                                    <td>EF Core</td>
                                    <td>7.0.x</td>
                                    <td>10.0.0</td>
                                    <td><span class="badge bg-success">Upgraded</span></td>
                                </tr>
                                <tr>
                                    <td>SignalR</td>
                                    <td>Not Implemented</td>
                                    <td>Implemented</td>
                                    <td><span class="badge bg-success">Added</span></td>
                                </tr>
                                <tr>
                                    <td>HealthChecks UI</td>
                                    <td>Not Implemented</td>
                                    <td>8.0.2</td>
                                    <td><span class="badge bg-success">Added</span></td>
                                </tr>
                                <tr>
                                    <td>Swagger/NSwag</td>
                                    <td>Not Implemented</td>
                                    <td>14.1.0</td>
                                    <td><span class="badge bg-success">Added</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@@microsoft/signalr@@7.0.14/dist/browser/signalr.min.js"></script>
<script>
    function openReact() {
        window.open('http://localhost:3000', '_blank');
    }
    
    // Wait for page to fully load
    document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ Page loaded - initializing buttons...');
            
            // Check if jQuery is loaded
            if (typeof jQuery !== 'undefined') {
                console.log('‚úÖ jQuery 3.7.1 loaded successfully!');
            } else {
                console.error('‚ùå jQuery is not loaded!');
            }
            
            // jQuery animation demo - using vanilla JS as fallback
            const demoBtn = document.getElementById('demo-btn');
            const demoResult = document.getElementById('demo-result');
            
            if (demoBtn) {
                demoBtn.addEventListener('click', function() {
                    console.log('Demo button clicked!');
                    demoBtn.disabled = true;
                    demoResult.innerHTML = '<div class="alert alert-info">Processing with jQuery...</div>';
                    
                    setTimeout(() => {
                        demoResult.innerHTML = `
                            <div class="alert alert-success">
                                <strong>Success!</strong> Bootstrap 5.3.3 + jQuery 3.7.1 working perfectly!
                                <br><small>Animation completed at: ${new Date().toLocaleTimeString()}</small>
                            </div>
                        `;
                        demoBtn.disabled = false;
                    }, 1000);
                });
                console.log('‚úÖ jQuery demo button initialized');
            } else {
                console.error('‚ùå Demo button not found!');
            }
            
            // SignalR connection - using vanilla JS
            let connection = null;
            const signalrBtn = document.getElementById('connect-signalr');
            const connectionStatus = document.getElementById('connection-status');
            const signalrStatus = document.getElementById('signalr-status');
            
            if (signalrBtn && typeof signalR !== 'undefined') {
                signalrBtn.addEventListener('click', function() {
                    console.log('SignalR button clicked!');
                    
                    if (connection && connection.state === signalR.HubConnectionState.Connected) {
                        connection.stop();
                        return;
                    }
                    
                    connection = new signalR.HubConnectionBuilder()
                        .withUrl("/hubs/notifications")
                        .build();
                    
                    connection.on("ReceiveNotification", (user, message) => {
                        console.log(`${user}: ${message}`);
                        signalrStatus.className = 'alert alert-success';
                        signalrStatus.innerHTML = `<small><strong>${user}:</strong> ${message}</small>`;
                    });
                    
                    connection.start()
                        .then(() => {
                            console.log('‚úÖ SignalR connected!');
                            connectionStatus.textContent = 'Connected';
                            connectionStatus.style.color = 'green';
                            signalrBtn.textContent = 'Disconnect';
                            signalrBtn.className = 'btn btn-sm btn-outline-danger';
                        })
                        .catch(err => {
                            console.error('‚ùå SignalR connection failed:', err);
                            connectionStatus.textContent = 'Error';
                            connectionStatus.style.color = 'red';
                            signalrStatus.className = 'alert alert-danger';
                            signalrStatus.innerHTML = `<small>Connection failed: ${err}</small>`;
                        });
                    
                    connection.onclose(() => {
                        console.log('SignalR disconnected');
                        connectionStatus.textContent = 'Disconnected';
                        connectionStatus.style.color = 'gray';
                        signalrBtn.textContent = 'Connect to Hub';
                        signalrBtn.className = 'btn btn-sm btn-outline-info';
                    });
                });
                console.log('‚úÖ SignalR button initialized');
            } else {
                console.error('‚ùå SignalR button not found or SignalR library not loaded!');
            }
    });
</script>

<style>
    .hover-card {
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .hover-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
    }
</style>

